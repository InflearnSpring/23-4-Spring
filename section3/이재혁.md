## ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ

â€œìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ í™•ì¥í•´ë³´ì.â€

- ì•…ë• ê¸°íšì: ì„œë¹„ìŠ¤ ì˜¤í”ˆ ì§ì „ì— í• ì¸ ì •ì±…ì„ ì§€ê¸ˆì²˜ëŸ¼ ê³ ì • ê¸ˆì•¡ì´ ì•„ë‹ˆë¼ ì¢€ ë” í•©ë¦¬ì ì¸ ì£¼ë¬¸ ê¸ˆì•¡ë‹¹ í• ì¸í•˜ëŠ” ì •ë¥  í• ì¸ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì‹¶ì–´ìš”.
- ìˆœì§„ ê°œë°œì: ì œê°€ ì²˜ìŒë¶€í„° ê³ ì • ê¸ˆì•¡ í• ì¸ì€ ì•„ë‹ˆë¼ê³  í–ˆì–ì•„ìš”.
- ì•…ë• ê¸°íšì: ì• ìì¼ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ì„ ì–¸ ëª°ë¼ìš”? â€œê³„íšì„ ë”°ë¥´ê¸°ë³´ë‹¤ ë³€í™”ì— ëŒ€ì‘í•˜ê¸°ë¥¼â€
- ìˆœì§„ ê°œë°œì: â€¦(í•˜ì§€ë§Œ ë‚œ ìœ ì—°í•œ ì„¤ê³„ê°€ ê°€ëŠ¥í•˜ë„ë¡ ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™ì„ ì¤€ìˆ˜í–ˆì§€ í›„í›„)

â€œRateDiscountPolicy ì¶”ê°€â€

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

public class RateDiscountPolicy implements DiscountPolicy {

    private int discountPercent = 10;
    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        } else {
            return 0;
        }
    }
}
```

RateDiscountPolicyTest

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.*;
import static org.junit.jupiter.api.Assertions.*;

class RateDiscountPolicyTest {

    RateDiscountPolicy discountPolicy = new RateDiscountPolicy();

    @Test
    @DisplayName("VIPëŠ” 10% í• ì¸ì´ ì ìš©ë˜ì–´ì•¼ í•œë‹¤")
    void vip_o() {
        //given
        Member member = new Member(1L, "memberVIP", Grade.VIP);
        //when
        int discount = discountPolicy.discount(member, 10000);
        //then
        assertThat(discount).isEqualTo(1000);
    }

    @Test
    @DisplayName("VIPê°€ ì•„ë‹ˆë©´ í• ì¸ì´ ì ìš©ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤")
    void vip_x() {
        //given
        Member member = new Member(2L, "memberBASIC", Grade.BASIC);
        //when
        int discount = discountPolicy.discount(member, 10000);
        //then
        assertThat(discount).isEqualTo(0);
    }

}
```

<aside>
ğŸ’¡ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™ì„ ì˜ ì¤€ìˆ˜ í–ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆì„ê¹Œ?

</aside>

## ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì 

í• ì¸ ì •ì±…ì„ ë³€ê²½í•˜ë ¤ë©´ í´ë¼ì´ì–¸íŠ¸ì¸ OrderServiceImpl ì½”ë“œë¥¼ ê³ ì³ì•¼ í•œë‹¤

OrderServiceImpl

```java
package hello.core.order;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.Member;
import hello.core.member.MemberRepository;
import hello.core.member.MemoryMemberRepository;

public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();
//    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);

        return new Order(memberId, itemName, itemPrice, discountPrice);
    }

}
```

â€œë¬¸ì œì  ë°œê²¬â€

- ìš°ë¦¬ëŠ” ì—­í• ê³¼ êµ¬í˜„ì„ ì¶©ì‹¤í•˜ê²Œ ë¶„ë¦¬í–ˆë‹¤. â†’ Ok
- ë‹¤í˜•ì„±ë„ í™œìš©í•˜ê³ , ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ ê°ì²´ë¥¼ ë¶„ë¦¬í–ˆë‹¤. â†’ Ok
- OCP, DIP ê°™ì€ ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™ì„ ì¶©ì‹¤íˆ ì¤€ìˆ˜í–ˆë‹¤.
    - ê·¸ë ‡ê²Œ ë³´ì´ì§€ë§Œ ì‚¬ì‹¤ì€ ì•„ë‹ˆë‹¤.
- DIP: ì£¼ë¬¸ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸(OrderServiceImpl)ëŠ” DiscountPolicy ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë©´ì„œ DIPë¥¼ ì§€í‚¨ ê²ƒ ê°™ì€ë°?
    - í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ ë¶„ì„í•´ ë³´ì. ì¶”ìƒë¿ë§Œ ì•„ë‹ˆë¼ **êµ¬ì²´(êµ¬í˜„) í´ë˜ìŠ¤ì—ë„ ì˜ì¡´**í•˜ê³  ìˆë‹¤.
    - ì¶”ìƒ(ì¸í„°í˜ì´ìŠ¤) ì˜ì¡´: DiscountPolicy
    - êµ¬ì²´(êµ¬í˜„) í´ë˜ìŠ¤: FixDiscountPolicy, RateDiscountPolicy
- OCP: ë³€ê²½í•˜ì§€ ì•Šê³  í™•ì¥í•  ìˆ˜ ìˆë‹¤ê³  í–ˆë‹¤!
    - ì§€ê¸ˆ ì½”ë“œëŠ” OCPë¥¼ ìœ„ë°˜í•œë‹¤

```java
//    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();

ì´ ë°”ë€ŒëŠ” ìˆœê°„ì´ OCP ìœ„ë°˜í•˜ëŠ” ìˆœê°„ì´ë‹¤.
```

### ì´ ë¬¸ì œë¥¼ ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œ?

```java
package hello.core.order;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.Member;
import hello.core.member.MemberRepository;
import hello.core.member.MemoryMemberRepository;

public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private DiscountPolicy discountPolicy;

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);

        return new Order(memberId, itemName, itemPrice, discountPrice);
    }

}
```

ìœ„ ì½”ë“œëŠ” ì¶”ìƒí™”ì¸ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ê²Œ ëœë‹¤.

â‡’ DIP - O, OCP - O

ë‹¹ì—°íˆ í…ŒìŠ¤íŠ¸ ì‹œ nullpointexception í„°ì§„ë‹¤.

(java.lang.NullPointerException: Cannot invoke "hello.core.discount.DiscountPolicy.discount(hello.core.member.Member, int)" because "this.discountPolicy" is null)

```java
private DiscountPolicy discountPolicy;

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);

        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
```

- ìœ„ ì½”ë“œì—ì„œ discountPolicyê°€ nullì´ë¯€ë¡œ discountPolicy.discountì—ì„œ ë„í¬ì¸íŠ¸ìµì…‰ì…˜ì´ ë°œìƒí•  ìˆ˜ ë°–ì— ì—†ë‹¤.

â‡’ DIPë¥¼ ì–´ë–»ê²Œ ì§€í‚¬ ìˆ˜ ìˆëŠ”ê±´ê°€?

**â€œí•´ê²°ë°©ì•ˆâ€**

- **ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ëˆ„êµ°ê°€ê°€ í´ë¼ì´ì–¸íŠ¸ì¸ OrderServiceImplì— DiscountPolicyì˜ êµ¬í˜„ ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…í•´ì£¼ì–´ì•¼ í•œë‹¤.**

## ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ â˜…

- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ ê³µì—°ì´ë¼ ìƒê°í•´ë³´ì. ê°ê°ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë°°ì—­(ë°°ìš° ì—­í• )ì´ë¼ ìƒê°í•˜ì. ê·¸ëŸ°ë° ì‹¤ì œ ë°°ì—­ì— ë§ëŠ” ë°°ìš°ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì€ ëˆ„ê°€ í•˜ëŠ”ê°€?
- ë¡œë¯¸ì˜¤ì™€ ì¤„ë¦¬ì—£ ê³µì—°ì„ í•˜ë©´ ë¡œë¯¸ì˜¤ ì—­í• ì„ ëˆ„ê°€ í• ì§€ ì¤„ë¦¬ì—£ ì—­í• ì„ ëˆ„ê°€ í• ì§€ëŠ” ë°°ìš°ë“¤ì´ ì •í•˜ëŠ”ê²Œ ì•„ë‹ˆë‹¤. ì´ì „ ì½”ë“œëŠ” ë§ˆì¹˜ ë¡œë¯¸ì˜¤(ì¸í„°í˜ì´ìŠ¤) ì—­í• ì„ í•˜ëŠ” ë ˆì˜¤ë‚˜ë¥´ë„ ë””ì¹´í”„ë¦¬ì˜¤(êµ¬í˜„ì²´)ê°€ ì¤„ë¦¬ì—£ ì—­í• (ì¸í„°í˜ì´ìŠ¤)ì„ í•˜ëŠ” ì—¬ì ì£¼ì¸ê³µ(êµ¬í˜„ì²´)ì„ ì§ì ‘ ì´ˆë¹™í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤. ë””ì¹´í”„ë¦¬ì˜¤ëŠ” ê³µì—°ë„ í•´ì•¼ í•˜ê³  ë™ì‹œì— ì—¬ì ì£¼ì¸ê³µë„ ê³µì—°ì— ì§ì ‘ ì´ˆë¹™í•´ì•¼ í•˜ëŠ” â€œë‹¤ì–‘í•œ ì±…ì„â€ì„ ê°€ì§€ê³  ìˆë‹¤.

â€œê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ìâ€

- ë°°ìš°ëŠ” ë³¸ì¸ì˜ ì—­í• ì¸ ë°°ì—­ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì—ë§Œ ì§‘ì¤‘í•´ì•¼ í•œë‹¤.
- ë””ì¹´í”„ë¦¬ì˜¤ëŠ” ì–´ë–¤ ì—¬ì ì£¼ì¸ê³µì´ ì„ íƒë˜ë”ë¼ë„ ë˜‘ê°™ì´ ê³µì—°ì„ í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
- ê³µì—°ì„ êµ¬ì„±í•˜ê³ , ë‹´ë‹¹ ë°°ìš°ë¥¼ ì„­ì™¸í•˜ê³ , ì—­í• ì— ë§ëŠ” ë°°ìš°ë¥¼ ì§€ì •í•˜ëŠ” ì±…ì„ì„ ë‹´ë‹¹í•˜ëŠ” ë³„ë„ì˜ â€œê³µì—° ê¸°íšìâ€ê°€ ë‚˜ì˜¬ ì‹œì ì´ë‹¤.
- ê³µì—° ê¸°íšìë¥¼ ë§Œë“¤ê³ , ë°°ìš°ì™€ ê³µì—° ê¸°íšìì˜ ì±…ì„ì„ í™•ì‹¤íˆ ë¶„ë¦¬í•˜ì.

### AppConfigì˜ ë“±ì¥

- ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ ë°©ì‹ì„ êµ¬ì„±(Config)í•˜ê¸° ìœ„í•´, êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  â€œì—°ê²°â€í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ” ë³„ë„ì˜ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì.

ìƒì„±ì ì£¼ì…

AppConfig

```java
package hello.core;

import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

}
```

memberServiceImpl

```java
package hello.core.member;

public class MemberServiceImpl implements MemberService {

		//ì´ì œ DIPë¥¼ ì§€í‚¤ê²Œ ëë‹¤.
    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

- ê°ì²´ì˜ ìƒì„±ê³¼ ì—°ê²°ì€ AppConfigê°€ ë‹´ë‹¹í•œë‹¤
- DIP ì™„ì„±: MemberServiceImplì€ MemberRepository ì¸ ì¶”ìƒì—ë§Œ ì˜ì¡´í•˜ë©´ ëœë‹¤. ì´ì œ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ëª°ë¼ë„ ëœë‹¤.
- â€œê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬â€: ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì—­í• ê³¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì´ ëª…í™•íˆ ë¶„ë¦¬ë˜ì—ˆë‹¤.

- appConfig ê°ì²´ëŠ” memoryMemberRepository ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ê°’ì„ memberServiceImplì„ ìƒì„±í•˜ë©´ì„œ ìƒì„±ìë¡œ ì „ë‹¬í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ì¸ memberServiceImpl ì…ì¥ì—ì„œ ë³´ë©´ ì˜ì¡´ê´€ê³„ë¥¼ ë§ˆì¹˜ ì™¸ë¶€ì—ì„œ ì£¼ì…í•´ì£¼ëŠ” ê²ƒ ê°™ë‹¤ê³  í•´ì„œ DI(Dependency Injection) ìš°ë¦¬ë§ë¡œ ì˜ì¡´ê´€ê³„ ì£¼ì…ë˜ëŠ” ì˜ì¡´ì„± ì£¼ì…ì´ë¼ í•œë‹¤.

OrderServiceImpl - ìƒì„±ì ì£¼ì…

```java
package hello.core.member;

public class MemberServiceImpl implements MemberService {

    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

â€œì •ë¦¬â€

- AppConfigë¥¼ í†µí•´ì„œ ê´€ì‹¬ì‚¬ë¥¼ í™•ì‹¤í•˜ê²Œ ë¶„ë¦¬í–ˆë‹¤
- ë°°ì—­, ë°°ìš°ë¥¼ ìƒê°í•´ë³´ì
- AppConfigëŠ” ê³µì—° ê¸°íšìë‹¤
- AppConfigëŠ” êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì„ íƒí•œë‹¤. ë°°ì—­ì— ë§ëŠ” ë‹´ë‹¹ ë°°ìš°ë¥¼ ì„ íƒí•œë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–»ê²Œ ë™ì‘í•´ì•¼ í• ì§€ ì „ì²´ êµ¬ì„±ì„ ì±…ì„ì§„ë‹¤.
- ì´ì œ ê° ë°°ìš°ë“¤ì€ ë‹´ë‹¹ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ì§€ë©´ ëœë‹¤.
- OrderServiceImplì€ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ì§€ë©´ ëœë‹¤.

## AppConfig ë¦¬íŒ©í„°ë§

- í˜„ì¬ AppConfigë¥¼ ë³´ë©´ â€œì¤‘ë³µâ€ì´ ìˆê³ , â€œì—­í• â€ì— ë”°ë¥¸ â€œêµ¬í˜„â€ì´ ì˜ ì•ˆë³´ì¸ë‹¤.

```jsx
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    private static MemoryMemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    public DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }

}
```

### ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©

- ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ì„œ ì •ì•¡ í• ì¸ ì •ì±…ì„ ì •ë¥  í• ì¸ ì •ì±…ìœ¼ë¡œ ë³€ê²½í•´ë³´ì
- FixDiscountPolicy â†’ RateDiscountPolicy

AppConfigì˜ ë“±ì¥ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í¬ê²Œ ì‚¬ìš© ì˜ì—­ê³¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  êµ¬ì„±(Configuration)í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ ë¶„ë¦¬ë˜ì—ˆë‹¤.

ì •ì•¡ í• ì¸ â†’ ì •ë¥  í• ì¸

```jsx
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    private static MemoryMemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    public DiscountPolicy discountPolicy() {
//        return new FixDiscountPolicy(); ì´ ë¶€ë¶„ì´ í• ì¸ ì •ì±…ì„ ë°”ê¾¼ë‹¤.
        return new RateDiscountPolicy();
    }

}
```

- í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì „í˜€ ì† ëŒˆ í•„ìš”ê°€ ì—†ìœ¼ë¯€ë¡œ OCPì™€ DIPë¥¼ ë‹¤ ë§Œì¡±í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.

### ì „ì²´ íë¦„ ì •ë¦¬

- ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ
    - ë‹¤í˜•ì„± ë•ë¶„ì— ìƒˆë¡œìš´ ì •ë¥  ê°œë°œì€ ë¬¸ì œê°€ ì—†ë‹¤
- ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ
    - ìƒˆë¡œ ê°œë°œí•œ ì •ë¥  í• ì¸ ì •ì±…ì„ ì ìš©í•˜ë ¤ê³  í•˜ë‹ˆ â€œí´ë¼ì´ì–¸íŠ¸ ì½”ë“œâ€ì¸ ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ë„ í•¨ê»˜ ë³€ê²½í•´ì•¼í•¨ Dipìœ„ë°˜
- ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬
    - AppConfig
    - í´ë¼ì´ì–¸íŠ¸ ê°ì²´ì˜ ì±…ì„ì´ ë”ìš± ëª…í™•í•´ì§„ë‹¤
- AppConfig ë¦¬íŒ©í„°ë§
    - ì¤‘ë³µì œê±°(*`memberRepository*()`)
- ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©
    - ì •ì•¡í• ì¸â†’ì •ë¥ í• ì¸
    - ì‚¬ìš©ì˜ì—­ê³¼ êµ¬ì„±(Configuration)í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ êµ¬ë¶„
        - â‡’ DIPì™€ OCPë¥¼ ì§€í‚¬ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤

### ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™ì˜ ì ìš©

- SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™
    - í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤.
- DIP ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™
    - í”„ë¡œê·¸ë˜ë¨¸ëŠ” â€œì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤.â€ ì˜ì¡´ì„± ì£¼ì…ì€ ì´ ì›ì¹™ì„ ë”°ë¥´ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤.
- OCP
    - ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤
        - ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†Œë¥¼ ìƒˆë¡­ê²Œ í™•ì¥í•´ë„ ì‚¬ìš© ì˜ì—­ì˜ ë³€ê²½ì€ ë‹«í˜€ ìˆë‹¤!

### IOC, DI, ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ

- ì œì–´ì˜ ì—­ì „ IoC(Inversion of Control)
    - AppConfigê°€ ë“±ì¥í•œ ì´í›„ì— êµ¬í˜„ ê°ì²´ëŠ” ìì‹ ì˜ ë¡œì§ì„ ì‹¤í–‰í•˜ëŠ” ì—­í• ë§Œ ë‹´ë‹¹í•œë‹¤. í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì€ ì´ì œ AppConfigê°€ ê°€ì ¸ê°„ë‹¤. ì˜ˆë¥¼ë“¤ì–´ OrderServiceImplì€ í•„ìš”í•œ ì¸í„°í˜ì´ìŠ¤ë“¤ì„ í˜¸ì¶œí•˜ì§€ë§Œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ë“¤ì´ ì‹¤í–‰ë ì§€ ëª¨ë¥¸ë‹¤.
        - ì´ë ‡ë“¯ í”„ë¡œê·¸ë¨ì˜ ì œì–´ íë¦„ì„ ì§ì ‘ ì œì–´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì™¸ë¶€ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ì œì–´ì˜ ì—­ì „(IoC)ì´ë¼ í•œë‹¤.
    - í”„ë ˆì„ì›Œí¬ vs ë¼ì´ë¸ŒëŸ¬ë¦¬
        - í”„ë ˆì„ì›Œí¬ê°€ ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì œì–´í•˜ê³ , ëŒ€ì‹  ì‹¤í–‰í•˜ë©´ ê·¸ê²ƒì€ í”„ë ˆì„ì›Œí¬ê°€ ë§ë‹¤(JUnit)
        - ë°˜ë©´ì— ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œê°€ ì§ì ‘ ì œì–´ì˜ íë¦„ì„ ë‹´ë‹¹í•œë‹¤ë©´ ê·¸ê²ƒì€ í”„ë ˆì„ì›Œí¬ê°€ ì•„ë‹ˆë¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.

- ì˜ì¡´ê´€ê³„ ì£¼ì… DI(Dependency Injection)
    - ì˜ì¡´ê´€ê³„ëŠ” â€œì •ì ì¸ í´ë˜ìŠ¤ ì˜ì¡´ ê´€ê³„ì™€ ì‹¤í–‰ ì‹œì ì— ê²°ì •ë˜ëŠ” ê°ì²´ ì˜ì¡´ ê´€ê³„â€ ë¶„ë¦¬í•˜ì—¬ ìƒê°

- IoCì»¨í…Œì´ë„ˆ, DI ì»¨í…Œì´ë„ˆ
    - AppConfig ì²˜ëŸ¼ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ê´€ë¦¬í•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì—°ê²°í•´ ì£¼ëŠ” ê²ƒì„
    - IoC ì»¨í…Œì´ë„ˆ ë˜ëŠ” DI ì»¨í…Œì´ë„ˆ ë¼ í•œë‹¤.
    - ì˜ì¡´ê´€ê³„ ì£¼ì…ì— ì´ˆì ì„ ë§ì¶”ì–´ ìµœê·¼ì—ëŠ” ì£¼ë¡œ DI ì»¨í…Œì´ë„ˆë¼ í•œë‹¤
    - ë˜ëŠ” ì–´ìƒ˜ë¸”ëŸ¬, ì˜¤ë¸Œì íŠ¸ íŒ©í† ë¦¬ ë“±ìœ¼ë¡œ ë¶ˆë¦¬ê¸°ë„ í•œë‹¤

### ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜í•˜ê¸°

ì§€ê¸ˆê¹Œì§€ ìˆœìˆ˜í•œ ìë°” ì½”ë“œë§Œìœ¼ë¡œ DIë¥¼ ì ìš©í–ˆë‹¤.

AppConfigë¥¼ ìŠ¤í”„ë§ ì „í™˜

configuration, beanì–´ë…¸í…Œì´ì…˜ ì¶”ê°€

```jsx
package hello.core;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.discount.RateDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    public static MemoryMemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    @Bean
    public DiscountPolicy discountPolicy() {
//        return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }

}
```

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ
    - ApplicationContext ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤
    - ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ AppConfig ë¥¼ ì‚¬ìš©í•´ì„œ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  DIë¥¼ í–ˆì§€ë§Œ, ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ ì‚¬ìš©í•œë‹¤.
    - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” @Configurationì´ ë¶™ì€ AppConfigë¥¼ ì„¤ì • ì •ë³´ë¡œ ì‚¬ìš©í•œë‹¤. ì—¬ê¸°ì„œ @Beanì´ë¼ ì íŒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í˜¸ì¶œí•´ì„œ ë°˜í™˜ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•œë‹¤. ì´ë ‡ê²Œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆì´ë¼ê³  í•œë‹¤.
    - ìŠ¤í”„ë§ ë¹ˆì€ @Beanì´ ë¶™ì€ ë©”ì„œë“œì˜ ëª…ì„ ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤
    - ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ì„œ í•„ìš”í•œ ìŠ¤í”„ë§ ë¹ˆ(ê°ì²´)ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤
        - applicationContext.getBean()